<html><head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/chess.js"></script>
        <script type="text/javascript" src="js/site.js"></script>
        <script type="text/javascript" src="js/chessboard-0.3.0.js"></script>
        <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="styles\site.css" rel="stylesheet" type="text/css">
        <link href="styles\custom.css" rel="stylesheet" type="text/css">
        <link href="styles/chessboard-0.3.0.css" rel="stylesheet" type="text/css">
    </head><body>
        <div class="page-wrap">
        <div class="navbar navbar-default navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
                <span class="sr-only">Menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <a class="navbar-brand" href="#"><img src="img/logo/name_large_transp.png" width="260"></a>
            <div class="collapse navbar-collapse menu" id="navbar-ex-collapse">
              <ul class="nav navbar-nav navbar-right">
                  <li>
                      <a href="index.html">HOME</a>
                  </li>
                  <li>
                      <a href="howitworks.html">HOW IT WORKS?</a>
                  </li>
                  <li>
                      <a href="fen.html">FEN</a>
                  </li>
                  <li>
                      <a href="pgn.html">PGN</a>
                  </li>
                  <li>
                      <a href="contact.html">CONTACT</a>
                  </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-5 vcenter">
                        <div id="board" style="width: 400px"></div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-md-10">
                                <h4 id="status"></h4>
                            </div>
                        </div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-md-1">
                                <h4>FEN:</h4>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" id="fen" readonly="">
                            </div>
                        </div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-md-1">
                                <h4>PGN:</h4>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" id="pgn" readonly="">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2 text-center vcenter">
                        <a class="btn btn-lg btn-success" onclick="btnClick();">GET CODE <i class="fa fa-arrow-right fa-fw"></i></a>
                    </div>
                    <div class="col-md-4 vcenter">
                        <img id="imgPgn" src="https://chart.googleapis.com/chart?chs=400x400&amp;cht=qr&amp;chl=rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1" class="img-responsive">
                    </div>
                </div>
            </div>
        </div>
        <div id="footer"></div>
        <script>
            $("#header").load("header.html");
            $("#footer").load("footer.html");

              var board,
                 game = new Chess(),
                 statusEl = $('#status'),
                 fenEl = $('#fen'),
                 pgnEl = $('#pgn'),
                 imgPgn = $('#imgPgn');

                 // do not pick up pieces if the game is over
                 // only pick up pieces for the side to move
                 var onDragStart = function(source, piece, position, orientation) {
                   if (game.game_over() === true ||
                   (game.turn() === 'w' && piece.search(/^b/) !== -1) ||
                   (game.turn() === 'b' && piece.search(/^w/) !== -1)) {
                     return false;
                   }
                 };

                 var onDrop = function(source, target) {
                   // see if the move is legal
                   var move = game.move({
                     from: source,
                     to: target,
                     promotion: 'q' // NOTE: always promote to a queen for example simplicity
                   });

                   // illegal move
                   if (move === null) return 'snapback';

                   updateStatus();
                 };

                 // update the board position after the piece snap
                 // for castling, en passant, pawn promotion
                 var onSnapEnd = function() {
                   board.position(game.fen());
                 };

                 var updateStatus = function() {
                   var status = '';

                   var moveColor = 'White';
                   if (game.turn() === 'b') {
                     moveColor = 'Black';
                   }

                   // checkmate?
                   if (game.in_checkmate() === true) {
                     status = 'Game over, ' + moveColor + ' is in checkmate.';
                   }

                   // draw?
                   else if (game.in_draw() === true) {
                     status = 'Game over, drawn position';
                   }

                   // game still on
                   else {
                     status = moveColor + ' to move';

                     // check?
                     if (game.in_check() === true) {
                       status += ', ' + moveColor + ' is in check';
                     }
                   }

                   statusEl.html(status);
                   fenEl.attr('value',game.fen());
                   pgnEl.attr('value',game.pgn());

                 };

                 var btnClick = function(){
                   imgPgn.attr("src","https://chart.googleapis.com/chart?chs=400x400&cht=qr&chl="+game.pgn());
                 };

                 var cfg = {
                   pieceTheme: 'img/chesspieces/alpha/{piece}.png',
                   draggable: true,
                   position: 'start',
                   onDragStart: onDragStart,
                   onDrop: onDrop,
                   onSnapEnd: onSnapEnd
                 };
                 board = ChessBoard('board', cfg);

                 updateStatus();
        </script>


</body></html>
